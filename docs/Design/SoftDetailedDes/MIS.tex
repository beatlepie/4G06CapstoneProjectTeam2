\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Jan 15 & 1.0 & Add introduction and module decomposition\\
Jan 17 & 1.0 & Revision 0\\
Apr 4  & 1.1 & Revision 1: Resolve TA feedback; Updated MIS to be consisted with design changes, implemented feedback, added new modules\\

\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \href{https://github.com/beatlepie/4G06CapstoneProjectTeam2/blob/main/docs/SRS-Volere/SRS.pdf}{SRS}
\subsection{Abbreviations and Acronyms}

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  MIS & Module Interface Specification \\
  MG & Module Guide \\
  SRS & Software Requirement Specification\\
  AR & Augmented Reality\\
  \bottomrule
\end{tabular}\\

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for CampusConnections. CampusConnections is a social media application with impressive AR camera and real time location map features that allows McMaster University students and visitors have an immersive user experience and expand their social networking. This application allows users to make new friends online and also encourage users to strengthen the friendship by in-person meet-ups with a on-campus location-sharing feature. It also provides heat maps of events and users, which allows students to join the most popular activities on campus. Besides, the application maintainers will share up-to-date events and lectures information for the community. The MIS will detail specifications for the project described above.

Complementary documents include the System Requirement Specifications (SRS)
and Module Guide. (MG)  The full documentation and implementation can be
found at \url{https://github.com/beatlepie/4G06CapstoneProjectTeam2/blob/main/docs/SRS-Volere/SRS.pdf} and \url{https://github.com/beatlepie/4G06CapstoneProjectTeam2/blob/main/docs/Design/SoftArchitecture/MG.pdf}

\section{Note about Exceptions}
Exceptions have been omitted from several access routines due to the error handling systems provided by Unity.
During development, it was discovered that Unity hides errors and gracefully handles exceptions making it redundant to use custom exception handling.
We decided to omit the exception that were thrown by the underlying Unity classes as we felt that was not abstract and was not appropriate for an MIS. 

\section{Notation}
The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
boolean & $\mathbb{B}$ & True or False\\
sequence of T & $<$T$>$ & a list of object with type T\\
asynchronous step T & Task$<$T$>$ & an asynchronous result of T\\
activity & Activity & generic class with $<$T$>$ that can be instantiated with type Lecture or Event\\
lecture & Lecture & see MIS of Lecture Module \\
event & Event & see MIS of Lecture Module \\
uniform resource identifier & Uri & C\# Class that provides easy access to a link (URI) \\
date and time & DateTime & provides a specific date and time \\
user & User & see MIS of User Module \\
scene & Scene & a user interface created in Unity \\
database reference & DatabaseReference & reference to the root location of a database \\
server connection & Connection & A WebSocket-based connection to the backend server \\
game object & GameObject & Data type used by the Unity engine to represent 3D Objects \\


\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding} & Hardware-Hiding Module \\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding}
& AR Interface Module\\
& RealTimeMap Module\\
& User Module\\
& Lecture Module\\
& Event Module\\
& DBConnector Module\\
& AuthConnector Module\\
& User Profile Module\\
& User Login Module\\
& Friend Manager Module\\ 
& Friend Request Module\\
& Friend Chat Module\\
& Lecture Detail View Module\\
& Event Detail View Module\\
& Lecture List Manager Module\\
& Event List Manager Module\\
& Notification Module\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision}
& Database Module\\
& Server Module\\
& Authentication Module\\
& AR Camera Module\\
& Mapbox Module\\
& Activity Detail View Module\\
& Pagination and Filter Module\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage

\section{MIS of Hardware-Hiding Module} \label{mHH}

\subsection{Module}

Hardware

This module is dependent on the physical device used and is implemented by the operating system of the device.

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}

Implemented by OS.

\subsubsection{Exported Access Programs}

Implemented by OS.

\subsection{Semantics}

\subsubsection{State Variables}

Implemented by OS.

\subsubsection{Environment Variables}

Implemented by OS.

\subsubsection{Assumptions}

Assume the device has a working Camera, GPS and Network card and all neccessary firmware and drivers to run the application.

\subsubsection{Access Routine Semantics}

Implemented by OS.

\subsubsection{Local Functions}

Implemented by OS.

\section{MIS of User Module} \label{mUser}

\subsection{Module}

User

\subsection{Uses}

Lecture Module, Event Module

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
User & String, String, Uri, String, $\mathbb{R}$, $<$User$>$, $<$User$>$, $<$Lecture$>$, $<$Event$>$ & User & -\\
SetNickName & String & - & -\\
SetPhotoUri & Uri & - & -\\
SetProgram & String & - & -\\
SetLevel & $\mathbb{R}$ & - & -\\
AddFriend & User & - & -\\
RemoveFriend & User & - & IndexOutofBound Exception\\
AddRequester & User & - & -\\
RemoveRequester & User & - & IndexOutofBound Exception\\
AddLecture & Lecture & - & -\\
RemoveLecture & Lecture & - & IndexOutofBound Exception\\
AddEvent & Event & - & -\\
RemoveEvent & Event & - & IndexOutofBound Exception\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item email: String, User email
\item nickName: String, User nickName
\item photoUri: Uri, User avatar
\item program: String, User program
\item level: $\mathbb{R}$, User program level
\item friends: $<$User$>$, List of friends
\item requesters: $<$User$>$, List of friend requester
\item lectures: $<$Lecture$>$, Pinned lecture
\item events: $<$Event$>$, Pinned event
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

Strings passed as input are of valid format, all the state variables of the object are directly accessible so getter is not needed.

\subsubsection{Access Routine Semantics}

\noindent User(email, nickName, photoUri, program, level, friends, requesters, lectures,events):
\begin{itemize}
\item transition: $email, nickName, photoUri, program, level, friends, requesters, lectures, events := \\ email, nickName, photoUri, program, level, friends, requesters, lectures, events$
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent SetNickName(newName):
\begin{itemize}
\item transition: $nickName := newName$
\item output: none
\item exception: none
\end{itemize}

\noindent SetPhotot(newUri):
\begin{itemize}
\item transition: $photoUri := newUri$
\item output: none
\item exception: none
\end{itemize}

\noindent SetProgram(newProgram):
\begin{itemize}
\item transition: $program := newProgram$
\item output: none
\item exception: none
\end{itemize}

\noindent SetLevel(newLevel):
\begin{itemize}
\item transition: $level := newLevel$
\item output: none
\item exception: none
\end{itemize}

\noindent AddFriend(newFriend):
\begin{itemize}
\item transition: $friends := friends + \{newFriend\}$
\item output: none
\item exception: none
\end{itemize}

\noindent RemoveFriend(targetFriend):
\begin{itemize}
\item transition: $friends := friends - \{targetFriend\}$
\item output: none
\item exception: $exc := targetFriend \notin friends \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent AddRequester(newRequester):
\begin{itemize}
\item transition: $requesters := requesters + \{newRequester\}$
\item output: none
\item exception: none
\end{itemize}

\noindent RemoveRequester(targetRequester):
\begin{itemize}
\item transition: $requesters := requesters - \{targetRequester\}$
\item output: none
\item exception: $exc := targetRequester \notin requesters \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent AddLecture(newLec):
\begin{itemize}
\item transition: $lectures := lectures + \{newLec\}$
\item output: none
\item exception: none
\end{itemize}

\noindent RemoveLecture(targetLecture):
\begin{itemize}
\item transition: $lectures := lectures - \{targetLecture\}$
\item output: none
\item exception: $exc := targetLecture \notin lectures \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent AddEvent(newEvent):
\begin{itemize}
\item transition: $events := events + \{newEvent\}$
\item output: none
\item exception: none
\end{itemize}

\noindent RemoveEvent(targetEvent):
\begin{itemize}
\item transition: $events := events - \{targetEvent\}$
\item output: none
\item exception: $exc := targetEvent \notin events \Rightarrow IndexOutofBound Exception$
\end{itemize}
\subsubsection{Local Functions}

None

\newpage

\section{MIS of Lecture Module} \label{mLec}

\subsection{Module}

Lecture

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Lecture & String, String, String, String, String & Lecture & -\\
SetName & String & - & -\\
SetInstructor & String & - & -\\
SetTime & String & - & -\\
SetLocation & String & - & -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item code: String, Lecture code
\item name: String, Lecture name
\item instructor: String, Lecture instructor
\item time: String, Lecture time
\item location: String, Lecture location
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

Strings passed as input are of valid format, all the state variables of the object are directly accessible so getter is not needed.

\subsubsection{Access Routine Semantics}

\noindent Lecture(lecCode, lecName, lecInstructor, lecTime, lecLocation):
\begin{itemize}
\item transition: $code, name, instructor, time, location := \\ lecCode, lecName, lecInstructor, lecTime, lecLocation$
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent SetName(newName):
\begin{itemize}
\item transition: $name := newName$
\item output: none
\item exception: none
\end{itemize}

\noindent SetInstructor(newInstructor):
\begin{itemize}
\item transition: $instructor := newInstructor$
\item output: none
\item exception: none
\end{itemize}

\noindent SetTime(newTime):
\begin{itemize}
\item transition: $time := newTime$
\item output: none
\item exception: none
\end{itemize}

\noindent SetLocation(newLocation):
\begin{itemize}
\item transition: $location := newLocation$
\item output: none
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

None

\newpage

\section{MIS of Event Module} \label{mEvent}

\subsection{Module}

Event

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Event & String, String, String,DateTime, $\mathbb{R}$, String, $\mathbb{B}$ & Event & -\\
SetDescription & String & - & -\\
SetOrganizer & String & - & -\\
SetStartTime & DateTime & - & -\\
SetDuration & $\mathbb{R}$ & - & -\\
SetLocation & String & - & -\\
SetPublic & $\mathbb{B}$ & - & -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item name: String, Event name
\item description: String, Event description
\item organizer: String, Event hosted by
\item startTime: DateTime, Event start date and time
\item duration: $\mathbb{R}$, Event duration (in minutes)
\item location: String,Event location (room and building)
\item public : $\mathbb{B}$, is event public
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

Strings passed as input are of valid format, all the state variables of the object are directly accessible so getter is not needed.

\subsubsection{Access Routine Semantics}

\noindent Event(name, description, organizer, startTime, duration, location, public):
\begin{itemize}
\item transition: $name, description, organizer, startTime, duration, location, public := \\ name, description, organizer, startTime, duration, location, public$
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent SetDescription(newDescription):
\begin{itemize}
\item transition: $description := newDescription$
\item output: none
\item exception: none
\end{itemize}

\noindent SetOrganizer(newOrganizer):
\begin{itemize}
\item transition: $organizer := newOrganizer$
\item output: none
\item exception: none
\end{itemize}

\noindent SetStartTime(newTime):
\begin{itemize}
\item transition: $startTime := newTime$
\item output: none
\item exception: none
\end{itemize}

\noindent SetDuration(newDuration):
\begin{itemize}
\item transition: $duration := newDuration$
\item output: none
\item exception: none
\end{itemize}

\noindent SetLocation(newLocation):
\begin{itemize}
\item transition: $location := newLocation$
\item output: none
\item exception: none
\end{itemize}

\noindent SetPublic(newPublicity):
\begin{itemize}
\item transition: $public := newPublicity$
\item output: none
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

None

\newpage

\section{MIS of Account Module} \label{mAccount}

\subsection{Module}

Account

\subsection{Uses}

Database Module, User Module, Authentication Module

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
UpdateNickName & String & - & -\\
UpdateProgram & String & - & -\\
UpdateLevel & $\mathbb{N}$ & - & -\\
AddFriend & User & - & -\\
DeleteFriend & User & - & IndexOutofBound Exception\\
AddRequest & User & - & -\\
DeleteRequest & User & - & IndexOutofBound Exception\\
PinLecture & Lecture & - & -\\
UnPinLecture & Lecture & - & IndexOutofBound Exception\\
PinEvent & Event & - & -\\
UnPinEvent & Event & - & IndexOutofBound Exception\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item User: User
User of the account
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

All the sate variables of User is accessible directly so there is no getters in the module.

\subsubsection{Access Routine Semantics}

\noindent UpdateNickName(newName):
\begin{itemize}
\item transition: $User.SetNickName(newName)$
\item output: none
\item exception: none
\end{itemize}

\noindent UpdateProgram(newProgram):
\begin{itemize}
\item transition: $User.SetProgram(newProgram)$
\item output: none
\item exception: none
\end{itemize}

\noindent UpdateLevel(newLevel):
\begin{itemize}
\item transition: $User.SetLevel(newLevel)$
\item output: none
\item exception: none
\end{itemize}

\noindent AddFriend(newFriend):
\begin{itemize}
\item transition: $User.AddFriend(newFriend)$ 
\item output: none
\item exception: none
\end{itemize}

\noindent DeleteFriend(targetFriend):
\begin{itemize}
\item transition: $User.RemoveFriend(targetFriend)$ 
\item output: none
\item exception: $exc := targetFriend \notin User.friends \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent AddRequest(newFriend):
\begin{itemize}
\item transition: $User.AddRequester(newFriend)$ 
\item output: none
\item exception: none
\end{itemize}

\noindent DeleteRequest(targetFriend):
\begin{itemize}
\item transition: $User.RemoveRequester(targetFriend)$ 
\item output: none
\item exception: $exc := targetFriend \notin User.friendRequests \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent PinLecture(newLec):
\begin{itemize}
\item transition: $User.AddLecture(newLec)$ 
\item output: none
\item exception: none
\end{itemize}

\noindent UnpinLecture(targetLec):
\begin{itemize}
\item transition: $User.RemoveLecture(targetLec)$ 
\item output: none
\item exception: $exc := targetLec \notin User.lectures \Rightarrow IndexOutofBound Exception$
\end{itemize}

\noindent PinEvent(newEvent):
\begin{itemize}
\item transition: $User.AddEvent(newEvent)$ 
\item output: none
\item exception: none
\end{itemize}

\noindent UnpinLecture(targetEvent):
\begin{itemize}
\item transition: $User.RemoveEvent(targetEvent)$ 
\item output: none
\item exception: $exc := targetEvent \notin User.events \Rightarrow IndexOutofBound Exception$
\end{itemize}

\subsubsection{Local Functions}

None

\newpage

\section{MIS of Friend Manager Module} \label{mFM}

\subsection{Module}

FriendManager

\subsection{Uses}

DBConnector, AuthConnector, Notification

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Init & - & - & - \\
DisplayFriendList & - & \textlangle GameObject\textrangle & - \\
DeleteFriend & String & - & - \\
ViewFriend & String & - & - \\
StartChat & String & - & - \\
SendRequest & String & - & -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item email: String
\item friends: List\textless User\textgreater
\end{itemize}

\subsubsection{Environment Variables}

\subsubsection{Assumptions}

Assume Init() is called first when this module is loaded.

\subsubsection{Access Routine Semantics}

\noindent Init():
\begin{itemize}
\item transition: $email :=$ AuthConnector.CurrentUser.Email
\item output: none
\item exception: none
\end{itemize}

\noindent DisplayFriendList():
\begin{itemize}
\item transition: none
\item output: $out := friendsContainer\ where\ (\forall i : \mathbb{Z} | 0 \leq i \leq friends.length:\\ friendsContainer[i].position, friendsContainer[i].content =\\ (0, i*HEIGHT), friends[i])$,
\item exception: none
\end{itemize}

\noindent DeleteFriend($friendEmail$):
\begin{itemize}
\item transition: DBConnector.SetValue("users/$email$/friends/$friendEmail$", $null$)
\item output: none
\item exception: none
\end{itemize}

\noindent ViewFriend($friendEmail$):
\begin{itemize}
\item transition: Load user profile page of User $u$ where $u.Email \equiv friendEmail$ 
\item output: none
\item exception: none
\end{itemize}

\noindent StartChat($friendEmail$):
\begin{itemize}
\item transition: Load chat scene with User $u$ where $u.Email \equiv friendEmail$
\item output: none
\item exception: none
\end{itemize}

\noindent SendRequest($friendEmail$):
\begin{itemize}
\item transition: DBConnector.AddRequest($friendEmail$, $email$) if the current user has not send a request yet
\item output: none
\item exception: none
\end{itemize}

\subsubsection{Local Functions}

GetFriends \\
GetFriends() $\equiv$ $friends :=$ DBConnector.GetValue("users/$email$/friends")

\subsubsection{Local Constants}
HEIGHT = 300 px

\newpage

\section{MIS of Friend Request Module} \label{mFR}

\subsection{Module}

FriendRequest

\subsection{Uses}

DBConnector, AuthConnector, Notification

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Init() & - & - & - \\
DisplayRequestList & - & \textlangle GameObject\textrangle & -\\
AcceptRequest & String & - & - \\
IgnoreRequest & String & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
	\item email: String
	\item friendRequests: List\textless String\textgreater
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

Assume Init() is called first when this module is loaded.

\subsubsection{Access Routine Semantics}
\noindent Init():
\begin{itemize}
\item transition: $email :=$ AuthConnector.CurrentUser.Email
\item output: none
\item exception: none
\end{itemize}

\noindent DisplayRequestList():
\begin{itemize}
\item transition: none
\item output: $out := requestContainer\ where\ (\forall i : \mathbb{Z} | 0 \leq i \leq friendRequests.length:\\ requestContainer[i].position, requestContainer[i].content =\\(0, i*HEIGHT), friendRequests[i])$,
\item exception: none
\end{itemize}

\noindent AcceptRequest($targetEmail$):
\begin{itemize}
\item transition: DBConnector.SetValue("users/$email$/friends/$targetEmail$", $true$)
\item output: none
\item exception: none
\end{itemize}

\noindent IgnoreRequest($targetEmail$):
\begin{itemize}
\item transition: DBConnector.SetValue("users/$email$/invitations/$targetEmail$", $null$)
\item output: none
\item exception: none
\end{itemize}

\subsubsection{Local Functions}

\noindent UpdateBadge: () \textrightarrow \space String \\
UpdateBadge $\equiv requestNum = 0 \Rightarrow empty string \\ 0 < requestNum < 100 \Rightarrow requestNum\\ 100 \leq requestNum \Rightarrow 99+$\\

\noindent GetFriendRequests \\
GetFriendRequests() $\equiv$ $friendRequests :=$ DBConnector.GetValue("users/$email$/invitations")

\subsubsection{Local Constants}
HEIGHT = 150 px

\newpage

\section{MIS of Activity Detail View Module} \label{mADV}

\subsection{Module}

ActivityDetailView(T)

\subsection{Uses}

DBConnector Module,  AuthConnector Module

\subsection{Syntax}

\subsubsection{Exported Constants}
none
\subsubsection{Exported Type}
ActivityDetailView = ?

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
new ActivityDetailView & T & - & - \\
ViewActivity & - & T & -\\ 
AddActivity & T & - & - \\
EditActivity & String, T & - & - \\
DeleteActivity & T & - & - \\
BookmarkActivity & T, String & - & - \\
UnbookmarkActivity & T, String & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item activity: set of T
  \item bookmarkedActivities: set of T
  \item bookmarked: $\mathbb{B}$
\end{itemize}

\subsubsection{Environment Variables}

none

\subsubsection{Assumptions}

All T has an attribute ID, which stands for the identity of the element.

\subsubsection{Access Routine Semantics}

\noindent new ActivityDetailView(clickedEntry):
\begin{itemize}
\item transition: $activity, bookmarkedActivities, bookmarked:= clickedEntry,\\ Bookmarked(AuthConnector.CurrentUser.Email), activity \in bookmarkedActivities$
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent ViewActivities():
\begin{itemize}
\item transition: none
\item output: $out := activity$
\item exception: none
\end{itemize}

\noindent AddActivity(newActivity):
\begin{itemize}
\item transition: $activities := activities + \{newActivity\}$
\item output: none
\item exception: none
\end{itemize}

\noindent EditActivity(targetID, editedActivity):
\begin{itemize}
\item transition: $\forall activity in activities\ |\ activity := activity.ID = targetID \Rightarrow editedActivity\ |\ activity$
\item output: none
\item exception: none
\end{itemize}

\noindent DeleteActivity(targetActivity):
\begin{itemize}
\item transition: $activities := activities - \{targetActivity\}$
\item output: none
\item exception: none
\end{itemize}

\noindent BookmarkActivity(newActivity, targetID):
\begin{itemize}
\item transition: $bookmarkedActivities, bookmarked := bookmarkedActivities + \{newActivity\},\\activity \in bookmarkedActivities;\\DBConnector.Root.Child(AuthConnector.CurrentUser.Email).Child(T).Child(targetID).\\.setAsycValue(newActivity.ToJSON())$
\item output: none
\item exception: none
\end{itemize}

\noindent UnbookmarkActivity(targetActivity, targetID):
\begin{itemize}
\item transition: $bookmarkedActivities, bookmarked := bookmarkedActivities - \{targetActivity\}, \\activity \in bookmarkedActivities;\\DBConnector.Root.Child(AuthConnector.CurrentUser.Email).Child(T).\\Child(targetID).setValueAsyc(null)$
\item output: none
\item exception: $exc := targetActivity \notin pinnedActivities \Rightarrow IndexOutofBound Exception$
\end{itemize}

\subsubsection{Local Functions}

\noindent Bookmarked(\_email):
\begin{itemize}
\item transition: none
\item output: $out := <new \ T(data)> | data \in DBConnector.Root.Child(_email).Child(T)$
\item exception: none
\end{itemize}

\subsubsection{Local Constants}

None

\newpage

\section{MIS of Lecture Detail View Module} \label{mLDV}

\subsection{Module}

LectureDetailView (ActivityDetailView$<$Lecture$>$)

\subsection{Uses}

DBConnector Module,  AuthConnector Module, Lecture Module

\subsection{Syntax}
\textbf{The rest of the sections of the module is the same as ActivityDetailView}

\newpage

\section{MIS of Event Detail View Module} \label{mEDV}

\subsection{Module}

EventDetailView (Activity Detail View $<$Event$>$)
\subsection{Uses}

Activity Detail View Module, Event Module

\subsection{Syntax}
\textbf{The rest of the sections of the module is the same as ActivityDetailView}

\newpage

\section{MIS of Authentication Module} \label{mAuth}

\subsection{Module}

Authentication

\subsection{External Module Documentation}

This module is provided by a 3rd party library (Firebase Authentication). For details of all syntax and semantics of exported constants and access programs, refer to the \href{https://firebase.google.com/docs/reference/unity/namespace/firebase/auth}{Firebase Auth Unity API Documentation}.
documentation

\subsection{Uses}

Hardware-Hiding Module, Database Module

\subsection{Syntax}

\subsubsection{Exported Constants}

Please refer to the external module documentation section.

\subsubsection{Exported Access Programs}

Please refer to the external module documentation section.

\subsection{Semantics}

\subsubsection{State Variables}

Please refer to the external module documentation section.

\subsubsection{Environment Variables}

Please refer to the external module documentation section.

\subsubsection{Assumptions}

The user will have a unique account and only has access to that account.

\subsubsection{Access Routine Semantics}

Please refer to the external module documentation section.

\subsubsection{Local Functions}

Please refer to the external module documentation section.

\subsubsection{Local Constants}

Please refer to the external module documentation section.

\newpage

\section{MIS of Permission Module} \label{mPerm}

\subsection{Module}

Permission

\subsection{Uses}

Authentication Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
	\hline
	\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
	\hline
	isAdmin & - & Boolean & - \\
	ChangePermission & User & - & InvalidPermissionException \\
	\hline
	\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item User: FirebaseUser
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

The user is logged in already.

\subsubsection{Access Routine Semantics}

\noindent isAdmin():
\begin{itemize}
\item transition: $(Auth.CurrentUser.valid = true) \rightarrow User = Auth.CurrentUser$ 
\item output: $(Auth.CurrentUser.admin = true \rightarrow true) \lor (Auth.CurrentUser.admin = false \rightarrow false)$
\item exception: $(Auth.CurrentUser.valid = false) \rightarrow TokenExpiredException$
\end{itemize}

\subsubsection{Local Functions}

\noindent RefreshToken(user):
\begin{itemize}
\item transition: $\exists <\_email, \_password> \in FirebaseAuth \Rightarrow Login$
\item output: $User = AuthResult.CurrentUser$
\item exception: $exc:= \lnot(\exists <\_email, \_password> \in FirebaseAuth) \Rightarrow AuthFailedException$
\end{itemize}

\subsubsection{Local Constants}

None

\newpage

\section{MIS of User Profile Module} \label{mUP}

\subsection{Module}

User Profile

\subsection{Uses}

Authentication Module, Database Module, User Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

None

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item User: FirebaseUser
\item CurrentUser: Boolean
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

The user exists and the current user is logged in already.

\subsubsection{Access Routine Semantics}

\begin{center}
	\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
	\hline
	\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
	\hline
	UpdateDisplay & String & Scene & - \\
	\hline
	\end{tabular}
\end{center}

\subsubsection{Local Functions}

\noindent UpdateDisplay(Message):
\begin{itemize}
\item transition: $StatusMessage = Message$ 
\item output: Scene
\item exception: $(Auth.LoginResult = false) \rightarrow InvalidLoginException$
\end{itemize}

\noindent GetUserData(user):
\begin{itemize}
\item transition: $\exists \_email \in Database \Rightarrow Database.UserData$
\item output: $User = UserData$
\item exception: None
\end{itemize}

\subsubsection{Local Constants}

\begin{itemize}
	\item Placeholder: set of Strings
	\item Scene: Unity Scene that contains the default UI page
\end{itemize}

\newpage

\section{MIS of User Login Module} \label{mLogin}

\subsection{Module}

User Login

\subsection{Uses}

Authentication Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
	\hline
	\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
	\hline
	UpdateDisplay & String & Scene & - \\
	\hline
	\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item User: FirebaseUser
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

The user is logged in already.

\subsubsection{Access Routine Semantics}

\noindent UpdateDisplay(Message):
\begin{itemize}
\item transition: $StatusMessage = Message$ 
\item output: Scene
\item exception: $(Auth.LoginResult = false) \rightarrow InvalidLoginException$
\end{itemize}

\subsubsection{Local Functions}

\noindent Login(\_email, \_password):
\begin{itemize}
\item transition: $\exists <\_email, \_password> \in Authentication \rightarrow User = Auth.LoginResult$ 
\item output: true if the credential is correct, false otherwise
\item exception: $(Auth.LoginResult = false) \rightarrow InvalidLoginException$
\end{itemize}

\subsubsection{Local Constants}

Scene: Unity Scene that contains the default UI page

\newpage

\section{MIS of Lecture List Manager Module} \label{mLL}

\subsection{Module}

Lecture List Manager

\subsection{Uses}

Lecture Module, PaginationNFilter$<$Lecture$>$ Module, DBConnector Module,\\ ActivityDetailView$<$Lecture$>$

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
init & - & - & -\\
Display & $<$Lecture$>$ & - & - \\
OnClickLecture & Lecture & - & -\\ 
nextPage & - & - &  -\\
prevPage & - & - &  -\\
firstPage & - & - &  -\\
lastPage & - & - &  -\\
AddLecture & Lecture & - & - \\
DeleteLecture & Lecture & - & - \\
FilterLecture & String, String & $<$Lecture$>$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item lecList: PaginationNFilter$<$Lecture$>$, displayed lectures
\item lecDetailView: ActivitDetailView$<$Lecture$>$, details of the lecture the user clicks on
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

LectureListManager.init() is called before any other access program.

\subsubsection{Access Routine Semantics}

\noindent init():
\begin{itemize}
\item transition: $lecList := new PaginationNFilter<Lecture>(allLecture(), `code', `') $
\item output: none
\item exception: none
\end{itemize}

\noindent Display():
\begin{itemize}
\item transition: Display lecture entries of the list in the current page on the screen
\item output: $out := currentPage*PageCount < lecList.filteredList.length \Rightarrow \\lecList.filteredList[(currentPage-1)*PageCount, (currentPage)*pageCount]\\ |\ lecList.filteredList[(currentPage - 1)*PageCount:]$
\item exception: none
\end{itemize}

\noindent OnClickLecture(targetLec):
\begin{itemize}
\item transition: $lecDetailView := new\ ActivityDetailView<Lecture>(targetLec)$
\item output: none
\item exception: none
\end{itemize}

\noindent nextPage():
\begin{itemize}
\item transition: $lecList.nextPage()$
\item output: none
\item exception: none
\end{itemize}

\noindent prevPage():
\begin{itemize}
\item transition: $lecList.prevPage()$
\item output: none
\item exception: none
\end{itemize}

\noindent firstPage():
\begin{itemize}
\item transition: $lecList.firstPage$
\item output: none
\item exception: none
\end{itemize}

\noindent lastPage():
\begin{itemize}
\item transition: $lecList.lastPage$
\item output: none
\item exception: none
\end{itemize}

\noindent AddLecture(newLec):
\begin{itemize}
\item transition: $lecList.Add(newLec);\\DBConnector.Root.Child(Lecture).Child(newLec.code).setAsyncValue(newLec.ToJSON())$
\item output: none
\item exception: none
\end{itemize}

\noindent DeleteLecture(targetLec):
\begin{itemize}
\item transition: $lecList.Remove(newLec);\\DBConnector.Root.Child(Lecture).Child(newLec.code).setAsyncValue(null))$
\item output: none
\item exception: none
\end{itemize}

\noindent FilterLecture(filterBy, filterString):
\begin{itemize}
\item transition: $lecList.filterBy, lecList.filterString := filterBy, filterString;\\lecList.filter(); Display()$
\item output: $out := lecList.filteredlist$
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

\noindent AllLectures():
\begin{itemize}
\item transition: none
\item output: A list of lectures retrieved from the DBConnector.Root
\item exception: none
\end{itemize}

\subsubsection{Local Constants}

None

\newpage

\section{MIS of Event List Manager Module} \label{mEL}

\subsection{Module}

Event List Manager

\subsection{Uses}

Event Module, PaginationNFilter$<$Event$>$ Module, DBConnector Module,\\ ActivityDetailView$<$Event$>$

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
init & - & - & -\\
Display & $<$Event$>$ & - & - \\
OnClickEvent & Event & - & -\\ 
nextPage & - & - &  -\\
prevPage & - & - &  -\\
firstPage & - & - &  -\\
lastPage & - & - &  -\\
AddEvent & Event & - & - \\
DeleteEvent & Event & - & - \\
FilterEvent & String, String & $<$Event$>$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item eventList: PaginationNFilter$<$Event$>$, displayed events
\item eventDetailView: ActivitDetailView$<$Event$>$, details of the event the user clicks on
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

EventListManager.init() is called before any other access program.

\subsubsection{Access Routine Semantics}

\noindent init():
\begin{itemize}
\item transition: $eventList := new PaginationNFilter<Event>(allEvent(), `name', `') $
\item output: none
\item exception: none
\end{itemize}

\noindent Display():
\begin{itemize}
\item transition: Display event entries of the list in the current page on the screen
\item output: $out := currentPage*PageCount < eventList.filteredList.length \Rightarrow \\eventList.filteredList[(currentPage-1)*PageCount, (currentPage)*pageCount]\\ |\ eventList.filteredList[(currentPage - 1)*PageCount:]$
\item exception: none
\end{itemize}

\noindent OnClickEvent(targetEvent):
\begin{itemize}
\item transition: $eventDetailView := new\ ActivityDetailView<Event>(targetEvent)$
\item output: none
\item exception: none
\end{itemize}

\noindent nextPage():
\begin{itemize}
\item transition: $eventList.nextPage()$
\item output: none
\item exception: none
\end{itemize}

\noindent prevPage():
\begin{itemize}
\item transition: $eventList.prevPage()$
\item output: none
\item exception: none
\end{itemize}

\noindent firstPage():
\begin{itemize}
\item transition: $eventList.firstPage$
\item output: none
\item exception: none
\end{itemize}

\noindent lastPage():
\begin{itemize}
\item transition: $eventList.lastPage$
\item output: none
\item exception: none
\end{itemize}

\noindent AddEvent(newEvent):
\begin{itemize}
\item transition: $eventList.Add(newEvent);\\DBConnector.Root.Child(Event).Child(newEvent.name).setAsyncValue(newEvent.ToJSON())$
\item output: none
\item exception: none
\end{itemize}

\noindent DeleteEvent(targetEvent):
\begin{itemize}
\item transition: $lecList.Remove(newEvent);\\DBConnector.Root.Child(Event).Child(newEvent.name).setAsyncValue(null))$
\item output: none
\item exception: none
\end{itemize}

\noindent FilterEvent(filterBy, filterString):
\begin{itemize}
\item transition: $eventList.filterBy, lecList.filterString := filterBy, filterString;\\eventList.filter(); Display()$
\item output: $out := eventList.filteredlist$
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

\noindent AllEvents():
\begin{itemize}
\item transition: none
\item output: A list of events retrieved from the DBConnector.Root
\item exception: none
\end{itemize}

\subsubsection{Local Constants}

None

\newpage

\section{MIS of Pagination and Filter Module} \label{mPF}

\subsection{Module}

PaginationNFilter(T)

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}
none
\subsubsection{Exported Type}
PaginationNFilter = ?
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
new PagniationNFilter & $<$T$>$, String, String & - & -\\
nextPage & - & - &  -\\
prevPage & - & - &  -\\
firstPage & - & - &  -\\
lastPage & - & - &  -\\
filter & - & $<$T$>$ & -\\
Add & T & - & - \\
Remove & T & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item list: $<$T$>$, displayed entries
\item filteredList: $<$T$>$, filtered entries
\item currentPage: $\mathbb{N}$, current page
\item maxPage: $\mathbb{N}$, max page
\item filterBy: String, filter option
\item filterString: String, filter string
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

T has an attribute that can be compared.

\subsubsection{Access Routine Semantics}

\noindent new PaginationNFilter(entries,  filterBy, filterString):
\begin{itemize}
\item transition: $list, currentPage, filterBy, filterString := entries, 1, filterBy, filterString;\\filter()$
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent filter():
\begin{itemize}
\item transition: $filteredList, maxPage, currentPage := < entry >\ |\ entry \in list\ \land\ entry[filterBy].contains(filterString),UpdateMax(filteredList), 1$
\item output: $out := filterList$
\item exception: none
\end{itemize}

\noindent nextPage():
\begin{itemize}
\item transition: $currentPage < maxPage \Rightarrow currentPage := currentPage + 1 $
\item output: $out := currentPage$
\item exception: none
\end{itemize}

\noindent prevPage():
\begin{itemize}
\item transition: $currentPage > 1 \Rightarrow currentPage := currentPage - 1 $
\item output: $out := currentPage$
\item exception: none
\end{itemize}

\noindent firstPage():
\begin{itemize}
\item transition: $currentPage := 1$
\item output: $out := currentPage$
\item exception: none
\end{itemize}

\noindent lastPage():
\begin{itemize}
\item transition: $currentPage := maxPage$
\item output: $out := currentPage$
\item exception: none
\end{itemize}

\noindent Add(list, T):
\begin{itemize}
\item transition: $list := list + \{T\}; filter()$
\item output: none
\item exception: none
\end{itemize}

\noindent Remove(list, T):
\begin{itemize}
\item transition: $list := list - \{T\}; filter()$
\item output: none
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

\noindent UpdateMaxPage(entries):
\begin{itemize}
\item transition: none
\item output: $out := entries.length = 0 \Rightarrow 1\ |\ entries.length \mod PageCount\\ \Rightarrow entries.length/PageCount\ |\ \lceil entries.length/PageCount \rceil$
\item exception: none
\end{itemize}

\subsubsection{Local Constants}

PageCount: 10

\newpage

\section{MIS of Notification Module} \label{mNoti}

\subsection{Module}

Notification

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}
none

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
new Notification & String & - & -\\
close & - & - &  -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item message: String, notification message
\end{itemize}

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

None

\subsubsection{Access Routine Semantics}

\noindent new Notification(message):
\begin{itemize}
\item transition: $message := message;$Display the message on the screen
\item output: $out := self$
\item exception: none
\end{itemize}

\noindent close():
\begin{itemize}
\item transition: Hide the message
\item output: none
\item exception: none
\end{itemize}
\subsubsection{Local Functions}

None

\subsubsection{Local Constants}

None

\newpage

\section{MIS of Database Module} \label{mDB}

\subsection{Module}

FirebaseDatabase

\subsection{External Module Documentation}

This module is provided by a 3rd party library (Firebase Realtime Database). For details of all syntax and semantics of exported constants and access programs, refer to the \href{https://firebase.google.com/docs/reference/unity/namespace/firebase/database}{Firebase Database Unity API Documentation}.
documentation

\subsection{Uses}

Hardware-Hiding Module

\subsection{Syntax}

\subsubsection{Exported Constants}

Please refer to the external module documentation section.

\subsubsection{Exported Access Programs}

Please refer to the external module documentation section.

\subsection{Semantics}

\subsubsection{State Variables}

Please refer to the external module documentation section.

\subsubsection{Environment Variables}

Please refer to the external module documentation section.

\subsubsection{Assumptions}

Assume the database connection is stable and it will not disconnect unless the user disconnect it manually.

\subsubsection{Access Routine Semantics}

Please refer to the external module documentation section.

\subsubsection{Local Functions}

None

\newpage

\section{MIS of Server Module} \label{mServer}

\subsection{Module}

RTCServer

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{3cm} p{2cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
SendMessage & String & Task & - \\
SendLocation & String, $\mathbb{R}$, $\mathbb{R}$ & Task & - \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

User identifiers are unique.

\subsubsection{Access Routine Semantics}

\noindent SendMessage($msg$):
\begin{itemize}
\item transition: none
\item output: $out :=$ Task; $out$.IsCompleted $:= True$; Invokes the ReceiveMessage() function on all other connected clients. 
\item exception: none
\end{itemize}

\noindent SendLocation($e$, $lat$, $lon$):
\begin{itemize}
\item transition: none
\item output: $out :=$ Task; $out$.IsCompleted $:= True$; Invokes the ReceiveMessage() function on all other connected clients.
\item exception: none
\end{itemize}

\subsubsection{Local Functions}

None

\newpage

\section{MIS of AR Camera} \label{mARCamera}

\subsection{Module}

AR Camera

\subsection{External Module Documentation}

This module is provided by a 3rd party library (Vuforia). The API documentation can be found in the \href[]{https://developer.vuforia.com/library/sites/default/files/references/unity/index.html}{Vuforia Unity API Reference}.

\subsection{Uses}

Hardware-Hiding Module

\subsection{Syntax}

\subsubsection{Exported Constants}

Please refer to the external module documentation section.

\subsubsection{Exported Access Programs}

Please refer to the external module documentation section.

\subsection{Semantics}

\subsubsection{State Variables}

Please refer to the external module documentation section.

\subsubsection{Environment Variables}

Please refer to the external module documentation section.

\subsubsection{Assumptions}

None

\subsubsection{Access Routine Semantics}

Please refer to the external module documentation section.

\subsubsection{Local Functions}

Please refer to the external module documentation section.

\newpage

\section{MIS of AR Interface} \label{mARInterface}

\subsection{Module}

AR Interface

\subsection{Uses}

AR Camera, Notification

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{5cm} p{2cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Initialize & (String, \textless GameObject\textgreater) & - & -\\
Display & String & - & -\\
OnTargetClick & - & - & - \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item dictionary: Dictionary$<$String, $<$GameObject$>$$>$, the dictionary of target name and corresponding AR objects
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
\item audio: AudioPlayer
\end{itemize}

\subsubsection{Assumptions}

The AudioPlayer is provided as an environment variable by the Unity engine

\subsubsection{Access Routine Semantics}

\noindent Initialize(target, objects):
\begin{itemize}
\item transition: $dictionary[target] := objects$
\item output: none
\item exception: none
\end{itemize}

\noindent Display(target):
\begin{itemize}
\item transition: Displays $dictionary[target]$ objects in Unity scene
\item output: none
\item exception: none
\end{itemize}

\noindent OnTargetClick():
\begin{itemize}
\item transition: $audio$.PlaySound(); Play a sound clip when an AR Target is clicked or tapped.
\item output: none
\item exception: none
\end{itemize}

\subsubsection{Local Functions}

None

\newpage

\section{MIS of MapBox} \label{mMap}

\subsection{Module}

MapBox \\

\subsection{External Module Documentation}

This module is provided by a 3rd party library (Mapbox).
The API documentation can be found in the \href[]{https://docs.mapbox.com/unity/maps/guides/}{Maps SDK for Unity} and \href[]{https://docs.mapbox.com/mapbox-unity-sdk/api/unity/Mapbox.Unity.html}{Mapbox Unity API Reference}.

\subsection{Uses}

Hardware-Hiding Module

\subsection{Syntax}

\subsubsection{Exported Constants}

Please refer to the external module documentation section.

\subsubsection{Exported Access Programs}

Please refer to the external module documentation section.

\subsection{Semantics}

\subsubsection{State Variables}

Please refer to the external module documentation section.

\subsubsection{Environment Variables}

Please refer to the external module documentation section.

\subsubsection{Assumptions}

None

\subsubsection{Access Routine Semantics}

Please refer to the external module documentation section.

\subsubsection{Local Functions}

Please refer to the external module documentation section.

\subsubsection{Local Constants}

Please refer to the external module documentation section.
 
\newpage

\section{MIS of Real-time Map} \label{mRealTimeMap}

\subsection{Module}

Real-time Map

\subsection{Uses}

Map Module, Server Module, Notification

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{3cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
StartConnection & String, String & - & - \\
SendLocation & RemoteUserLocation & - & - \\
ReceiveLocation & RemoteUserLocation & - & - \\
DisplayUserLocations & - & - & - \\
HandleInputBuilding & - & - & - \\
DisplayWarningNotification & - & - & - \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item connection: Connection
\item buildings: List\textless\textlangle $\mathbb{R}$, $\mathbb{R}$\textrangle\textgreater 
\item usrLoc: UserLocation
\item rmtUsrLoc: set of UserLocation
\end{itemize}

\subsubsection{Environment Variables}
\begin{itemize}
\item locationServer: Server
\item gps: GPS
\end{itemize}

\subsubsection{Assumptions}

StartConnection() is called first when the module is loaded.\\
The user's mobile device automatically provides the gps Environment Variable.\\
The $gps$ automatically updates $usrLoc$.

\subsubsection{Access Routine Semantics}

\noindent StartConnection($url$, $end$):
\begin{itemize}
\item transition: $connection := $ new Connection($locationServer$, $url$, $end$)
\item output: none
\item exception: none
\end{itemize}

\noindent SendLocation($l$):
\begin{itemize}
\item transition: $l := gps$.GetLocation(), $locationServer$.SendLocation($l$)
\item output: none
\item exception: none
\end{itemize}

\noindent ReceiveLocation($l$):
\begin{itemize}
\item transition: $rmtUsrLoc := rmtUsrLoc \cup \{l\}$
\item output: none
\item exception: none
\end{itemize}

\noindent DisplayUserLocations():
\begin{itemize}
\item transition: Renders $usrLoc$ and $rmtUsrLoc$ on the map as visual elements.
\item output: none
\item exception: none
\end{itemize}

\noindent HandleInputBuilding():
\begin{itemize}
\item transition: Displays an interface when building $b \in building$ is tapped/clicked.
\item output: none
\item exception: none
\end{itemize}

\subsubsection{Local Types}

UserLocation = tuple of (latitude: $\mathbb{R}$, longitude: $\mathbb{R}$, email: String)

\subsubsection{Local Functions}

\newpage

\section{MIS of Friend Chat} \label{mFC}

\subsection{Module}

Friend Chat

\subsection{Uses}

Server Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{3cm} p{3cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
StartConnection & String, String & - & - \\
SendMessage & String & - & - \\
ReceiveMessage & String & - & - \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item connection: Connection
\item messages: List\textless String\textgreater
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
\item chatServer: Server
\end{itemize}

\subsubsection{Assumptions}

The handler parameter in StartConnection is always set to "ReceiveMessage".

\subsubsection{Access Routine Semantics}

\noindent StartConnection($url$, $handler$):
\begin{itemize}
\item transition: $connection := $ new Connection($chatServer$, $url$, $handler$)
\item output: none
\item exception: none
\end{itemize}

\noindent SendMessage($m$):
\begin{itemize}
\item transition: $chatServer$.SendMessage($m$)
\item output: none
\item exception: none
\end{itemize}

\noindent ReceiveMessage($m$):
\begin{itemize}
\item transition: $messages := messages$.Append($m$)
\item output: none
\item exception: none
\end{itemize}

\subsubsection{Local Functions}

None

\newpage

\section{Appendix} \label{Appendix}
\subsection{Database Tables}

\quad \textbf{User}
\begin{table}[H]
	\begin{tabular}{|p{0.25\textwidth}|p{0.25\textwidth}|p{0.40\textwidth}|}
		\hline
		\textbf{Column Name} & \textbf{Type}  & \textbf{Description}                  \\
		\hline
		email                   & String                & ID of a user                        \\
		\hline
		nickName           & (Optional) String                & Nickname/display name of a user      \\
		\hline
		photoUri           & (Optional) Uri                & Visual Avatar       \\
		\hline
		program            & (Optional) String                & Study field                \\
		\hline
		level             & (Optional) int                & Level of program                 \\
		\hline
		friends          &  (Optional) $<$User$>$                & List of friends \\
		\hline
		friendRequests          &  (Optional) $<$User$>$                & List of requesters              \\
		\hline
		lectures                & (Optional) $<$Lecture$>$                & List of pinned lecture                     \\
		\hline
		events                & (Optional) $<$Event$>$                & List of pinned event                     \\			
		\hline
\end{tabular}
\end{table}

\textbf{Lecture}
\begin{table}[H]
	\begin{tabular}{|p{0.25\textwidth}|p{0.25\textwidth}|p{0.40\textwidth}|}
		\hline
		\textbf{Column Name} & \textbf{Type}  & \textbf{Description}                  \\
		\hline
		code                   & String                & ID of a course, course code\\
		\hline
		name           & (Optional) String     & formal name of a course      \\
		\hline
		instructor           & (Optional) String      & name of the instructor       \\
		\hline
		time            & (Optional) String                & Includes start and end time in a weekly schedule  \\
		\hline
		location             & (Optional) String                & Building and room                 \\
		\hline
\end{tabular}
\end{table}

\textbf{Event}
\begin{table}[H]
	\begin{tabular}{|p{0.25\textwidth}|p{0.25\textwidth}|p{0.40\textwidth}|}
		\hline
		\textbf{Column Name} & \textbf{Type}  & \textbf{Description}                  \\
		\hline
		name                   & String                & ID of an event\\
		\hline
		description           & (Optional) String     & event description \\
		\hline
		organizer           & (Optional) String      & organizer of the event       \\
		\hline
		startTime            & (Optional) DateTime               & when it starts  \\
		\hline
		duration            & (Optional) int               & how long is the event (in minutes)  \\
		\hline
		location             & (Optional) String                & Building and room                 \\
		\hline
		isPublic             & $\mathbb{B}$                & If it is a public event                \\
		\hline
\end{tabular}
\end{table}
\newpage
\bibliographystyle {plainnat}
\bibliography{../../../refs/References}
\end{document}